kube-prometheus-stack:
  prometheus:
    prometheusSpec:
      remoteWrite:
        - url: https://prometheus-prod-10-prod-us-central-0.grafana.net/api/prom/push
          basicAuth:
            username:
              name: grafana-axter
              key: username
            password:
              name: grafana-axter
              key: password
          writeRelabelConfigs:
            - sourceLabels:
                - "__name__"
              regex: ":node_memory_MemAvailable_bytes:sum|alertmanager_alerts|alertmanager_alerts_invalid_total|alertmanager_alerts_received_total|alertmanager_notification_latency_seconds_bucket|alertmanager_notification_latency_seconds_count|alertmanager_notification_latency_seconds_sum|alertmanager_notifications_failed_total|alertmanager_notifications_total|apiserver_request:availability30d|apiserver_request_total|cluster_quantile:apiserver_request_duration_seconds:histogram_quantile|code_resource:apiserver_request_total:rate5m|container_cpu_cfs_periods_total|container_cpu_cfs_throttled_periods_total|container_cpu_usage_seconds_total|container_fs_reads_bytes_total|container_fs_reads_total|container_fs_writes_bytes_total|container_fs_writes_total|container_memory_cache|container_memory_rss|container_memory_swap|container_memory_usage_bytes|container_memory_working_set_bytes|container_network_receive_bytes_total|container_network_receive_packets_dropped_total|container_network_receive_packets_total|container_network_transmit_bytes_total|container_network_transmit_packets_dropped_total|container_network_transmit_packets_total|coredns_cache_entries|coredns_cache_hits_total|coredns_cache_misses_total|coredns_cache_size|coredns_dns_do_requests_total|coredns_dns_request_count_total|coredns_dns_request_do_count_total|coredns_dns_request_duration_seconds_bucket|coredns_dns_request_size_bytes_bucket|coredns_dns_request_type_count_total|coredns_dns_requests_total|coredns_dns_response_rcode_count_total|coredns_dns_response_size_bytes_bucket|coredns_dns_responses_total|etcd_disk_backend_commit_duration_seconds_bucket|etcd_disk_wal_fsync_duration_seconds_bucket|etcd_mvcc_db_total_size_in_bytes|etcd_network_client_grpc_received_bytes_total|etcd_network_client_grpc_sent_bytes_total|etcd_network_peer_received_bytes_total|etcd_network_peer_sent_bytes_total|etcd_server_has_leader|etcd_server_leader_changes_seen_total|etcd_server_proposals_applied_total|etcd_server_proposals_committed_total|etcd_server_proposals_failed_total|etcd_server_proposals_pending|go_goroutines|grpc_server_handled_total|grpc_server_started_total|instance:node_cpu_utilisation:rate5m|instance:node_load1_per_cpu:ratio|instance:node_memory_utilisation:ratio|instance:node_network_receive_bytes_excluding_lo:rate5m|instance:node_network_receive_drop_excluding_lo:rate5m|instance:node_network_transmit_bytes_excluding_lo:rate5m|instance:node_network_transmit_drop_excluding_lo:rate5m|instance:node_num_cpu:sum|instance:node_vmstat_pgmajfault:rate5m|instance_device:node_disk_io_time_seconds:rate5m|instance_device:node_disk_io_time_weighted_seconds:rate5m|kube_node_status_allocatable|kube_pod_container_resource_limits|kube_pod_container_resource_requests|kube_pod_info|kube_pod_owner|kube_resourcequota|kube_statefulset_metadata_generation|kube_statefulset_replicas|kube_statefulset_status_observed_generation|kube_statefulset_status_replicas|kube_statefulset_status_replicas_current|kube_statefulset_status_replicas_ready|kube_statefulset_status_replicas_updated|kubelet_cgroup_manager_duration_seconds_bucket|kubelet_cgroup_manager_duration_seconds_count|kubelet_node_config_error|kubelet_node_name|kubelet_pleg_relist_duration_seconds_bucket|kubelet_pleg_relist_duration_seconds_count|kubelet_pleg_relist_interval_seconds_bucket|kubelet_pod_start_duration_seconds_count|kubelet_pod_worker_duration_seconds_bucket|kubelet_pod_worker_duration_seconds_count|kubelet_running_container_count|kubelet_running_containers|kubelet_running_pod_count|kubelet_running_pods|kubelet_runtime_operations_duration_seconds_bucket|kubelet_runtime_operations_errors_total|kubelet_runtime_operations_total|kubelet_volume_stats_available_bytes|kubelet_volume_stats_capacity_bytes|kubelet_volume_stats_inodes|kubelet_volume_stats_inodes_used|kubeproxy_network_programming_duration_seconds_bucket|kubeproxy_network_programming_duration_seconds_count|kubeproxy_sync_proxy_rules_duration_seconds_bucket|kubeproxy_sync_proxy_rules_duration_seconds_count|namespace_cpu:kube_pod_container_resource_limits:sum|namespace_cpu:kube_pod_container_resource_requests:sum|namespace_memory:kube_pod_container_resource_limits:sum|namespace_memory:kube_pod_container_resource_requests:sum|namespace_workload_pod|namespace_workload_pod:kube_pod_owner:relabel|node_cpu_seconds_total|node_disk_io_time_seconds_total|node_disk_read_bytes_total|node_disk_written_bytes_total|node_exporter_build_info|node_filesystem_avail_bytes|node_filesystem_size_bytes|node_load1|node_load15|node_load5|node_memory_Buffers_bytes|node_memory_Cached_bytes|node_memory_MemAvailable_bytes|node_memory_MemFree_bytes|node_memory_MemTotal_bytes|node_namespace_pod_container:container_cpu_usage_seconds_total:sum_irate|node_namespace_pod_container:container_memory_cache|node_namespace_pod_container:container_memory_rss|node_namespace_pod_container:container_memory_swap|node_namespace_pod_container:container_memory_working_set_bytes|node_network_receive_bytes_total|node_network_transmit_bytes_total|process_cpu_seconds_total|process_resident_memory_bytes|process_start_time_seconds|prometheus|prometheus_build_info|prometheus_engine_query_duration_seconds|prometheus_engine_query_duration_seconds_count|prometheus_sd_discovered_targets|prometheus_target_interval_length_seconds_count|prometheus_target_interval_length_seconds_sum|prometheus_target_scrapes_exceeded_sample_limit_total|prometheus_target_scrapes_sample_duplicate_timestamp_total|prometheus_target_scrapes_sample_out_of_bounds_total|prometheus_target_scrapes_sample_out_of_order_total|prometheus_target_sync_length_seconds_sum|prometheus_tsdb_head_chunks|prometheus_tsdb_head_samples_appended_total|prometheus_tsdb_head_series|rest_client_request_duration_seconds_bucket|rest_client_requests_total|scheduler_binding_duration_seconds_bucket|scheduler_binding_duration_seconds_count|scheduler_e2e_scheduling_duration_seconds_bucket|scheduler_e2e_scheduling_duration_seconds_count|scheduler_scheduling_algorithm_duration_seconds_bucket|scheduler_scheduling_algorithm_duration_seconds_count|scheduler_volume_scheduling_duration_seconds_bucket|scheduler_volume_scheduling_duration_seconds_count|storage_operation_duration_seconds_bucket|storage_operation_duration_seconds_count|storage_operation_errors_total|up|volume_manager_total_volumes|workqueue_adds_total|workqueue_depth|workqueue_queue_duration_seconds_bucket"
              action: "keep"
            replicaExternalLabelName: "__replica__"
            externalLabels: { cluster: "testdm" }
#          writeRelabelConfigs:
#            - sourceLabels:
#                - "__name__"
#              regex: "up|instance:node_num_cpu:sum|kubernetes_io_hostname|machine_cpu_cores|machine_memory_bytes|container_memory_working_set_bytes|container_cpu_usage_seconds_total|container_fs_usage_bytes|container_fs_limit_bytes|nginx_ingress_controller_requests|nginx_ingress_controller_nginx_process_connections|nginx_ingress_controller_success|nginx_ingress_controller_config_last_reload_successful|nginx_ingress_controller_request_size_sum|nginx_ingress_controller_nginx_process_cpu_seconds_total|nginx_ingress_controller_nginx_process_resident_memory_bytes|nginx_ingress_controller_request_duration_seconds_bucket|nginx_ingress_controller_ssl_expire_time_seconds"
#              action: "keep"
#            - sourceLabels:
#                - "job"
#              regex: "statsd-exporter"
#              action: "keep"
    additionalServiceMonitors:
      - name: "ingress-nginx-monitor"
        selector:
          matchLabels:
            app.kubernetes.io/name: ingress-nginx
        namespaceSelector:
          matchNames:
            - ingress-nginx
        endpoints:
          - port: "metrics"
  alertmanager:
    enabled: false
  grafana:
    enabled: false

sealed-secret:
  name: grafana-axter
  namespace: monitoring
  type: Opaque
  encryptedData:
    username: AgChSAEsGmO4/CrWzU1Lg3B3CXDi6KTQjWUuzhzk0xvXE86DrBkypTAA7Kubf2mddYGldk+YTMqUe5kuzt4jm4NAVD7zXosROVxH3h2VTDgTdSBjNdgDUx/xMLcRbMefE6t0ti37RcHDbFE9mGoe/uhXW+WPHrehWKoOLcM00WEH4JcEM9DGQ6JhPJk76Us7dMMgWphaKBeHii+jcIDEAHbDvm/tb/PNcrgTp2lmCWbPkDUqVPLjAvT+PJdNUb8wHWfIJ/9ocBR+nrnrTkk+jLFHj/kGOc7ENi6mCVBK1Roazx1pHttPwVmXqpZfWkwM9GPB3RT1cjZTFeol+YTd7NUb1mtCBz3V7W9abJLPGMzflotKYvlCwHPXXulHSGRZBoBLS7ocr6jg6/dIziPI2kwAA/ArlJcFybi9BDyplqrkyst7j0ac0Q1dBTecASL835aWVZAsTGNW5nva+tXp06NPOdImb9bGkbEuczSHxWgPUQtxCo66EpHJaZP6AnvIaQBWYtpNCH8IMknnp8Vq7s/Cj8TNXAVmxUf2ZdyEMhgp7BJc4NRVSaTnX2JjlxAhgfNwgafNRlyZjdbCXSBa4kY6oPHR/Xa4+2Opj8JXhT7Jy32vP+TrndQKB+Mt0P6XbPuV2gyQQbA/biEtgwgsCi/XqXOFh4mH0VIszd0/8bqroqHzNJZ63ia3mqWek0BDJzYJUP2+2WU=
    password: AgByH01PMmN6KsUVMgteTuaz83Tni3LNlmDjr9Nxjd57L2kXmPwJlUSHdzoVmIWptoG/HxOJxm2XXg9HuHDJufWXvW1kM3ZXBKg5YnbMJT0M7eUEbN6cufacB73Q7zGcxzEL10rBmS31fFkWPzcJ8RnxqsCie9CjnPZJnqiHp6FaOYncrY3f2CI82IjnbbvabULeND+fmuvSMEMcT1G+nViiuWia2QCSvfJ1T1bXYQqJO+wqt2N4NlyCCWPnCK28i/PmloJa5htmA9JYodk+KNJOBrmnW35GOfea2DWVWrWsClQ0sNXazC8h1hOQ7Ri72MwrYaB6dNR5qWzCX3/QaJAOpeeI1mivFyDQKdcvanzxoRsVrxa0LPIrHGEQ5cas4FmYGigHDe9FA8S/j+iZtaDMrHbHsNvQdgRSNhGBPBHl6zznlkUitY4xT7IiPh4IxVDFiBnk8vlt1CIe9GuBGkX4O+Cs09xnSkpGZtLN5BF2Jt/QDBrNDaahG0Lbd4OMqeeYGF7EtP4QPvl7T1ODnlpwKHS7ueOrt/2xL2Kyuldi7K8pmeKqlcY7VEKm5FlCsJtsWNnzGkhuMj1VPnuOzzdhrNEFGKQtuVjjHoEpsXDH2Mt2P269hOfo0pqrXI0GQhVBmVbt0tsWDPk2FoM58OiYNW56Drhlku8Q4qfNUl/O4rLRbbI161g8cWmCj3+IwYJn++MHTtGEHHmNYc3CfFWdlTLYx1kI+58e87mXrPFg8D0INfj03awqwwIa6KpznA9NLhYZAi+0Zr9mYQFxMaKJscpGUmYKd+sGlXBhnV992Aoq3/JB52GB3SbTbbUweXg=
